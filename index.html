<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORUSCANT</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        body {
            background-color: #000;
            color: #fff;
            font-family: 'VT323', monospace;
            font-size: 28px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        #container {
            width: 100%;
            max-width: 600px;
        }

        #dialogue-box {
            border: 3px solid #fff;
            padding: 25px;
            min-height: 150px;
            white-space: pre-wrap;
            line-height: 1.4;
            cursor: pointer;
        }

        #password-section {
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            margin-top: 30px;
            text-align: center;
        }

        #password-section.visible {
            display: block;
            opacity: 1;
        }

        .password-input {
            width: 2em;
            height: 2em;
            text-align: center;
            background: #000;
            color: #fff;
            border: none;
            border-bottom: 3px solid #fff;
            font-family: 'VT323', monospace;
            font-size: 32px;
            margin: 0 5px;
            -moz-appearance: textfield;
        }
        .password-input::-webkit-outer-spin-button,
        .password-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        #password-section span {
            font-size: 32px;
            vertical-align: bottom;
        }

        #message {
            margin-top: 20px;
            color: #FFFF00;
            height: 30px;
            font-size: 24px;
        }
    </style>
</head>
<body>

    <div id="container">
        <div id="dialogue-box">)i(</div>
        
        <div id="password-section">
            <div>
                <input type="number" class="password-input" id="d1" maxlength="1" pattern="[0-9]*">
                <input type="number" class="password-input" id="d2" maxlength="1" pattern="[0-9]*">
                <span>/</span>
                <input type="number" class="password-input" id="m1" maxlength="1" pattern="[0-9]*">
                <input type="number" class="password-input" id="m2" maxlength="1" pattern="[0-9]*">
            </div>
            <p id="message"></p>
        </div>
    </div>

    <script>
        const text = `I won’t fall down, you need me
We don't follow crowds, we mold them new
I'm not done, believe me
We won’t settle down, we'll make them move
Make them mine`;
        
        const typingSpeed = 50;
        const correctPassword = "0711";
        const redirectLink = "https://TWINE.com";
        const hintMessage = "Parabéns para você!!";

        const dialogueEl = document.getElementById('dialogue-box');
        const passwordSectionEl = document.getElementById('password-section');
        const messageEl = document.getElementById('message');
        const inputs = document.querySelectorAll('.password-input');

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playBlip() {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.type = 'triangle';
            oscillator.frequency.setValueAtTime(700, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + 0.03);
        }

        let i = 0;
        function typeWriter() {
            if (i < text.length) {
                dialogueEl.innerHTML += text.charAt(i);
                
                if (text.charAt(i) !== ' ' && text.charAt(i) !== '\n') {
                    playBlip();
                }
                
                i++;
                setTimeout(typeWriter, typingSpeed);
            } else {
                showPasswordSection();
            }
        }

        function showPasswordSection() {
            passwordSectionEl.classList.add('visible');
            document.getElementById('d1').focus();
        }

        function setupPasswordLogic() {
            inputs.forEach((input, index) => {
                input.addEventListener('input', () => {
                    if (input.value.length === input.maxLength) {
                        if (index < inputs.length - 1) {
                            inputs[index + 1].focus();
                        } else {
                            checkPassword();
                        }
                    }
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === "Backspace" && input.value.length === 0 && index > 0) {
                        inputs[index - 1].focus();
                    }
                });
            });
        }

        function checkPassword() {
            const d1 = document.getElementById('d1').value;
            const d2 = document.getElementById('d2').value;
            const m1 = document.getElementById('m1').value;
            const m2 = document.getElementById('m2').value;
            const fullPassword = d1 + d2 + m1 + m2;

            if (fullPassword === correctPassword) {
                messageEl.textContent = "Correto! Redirecionando...";
                messageEl.style.color = "#00FF00";
                setTimeout(() => {
                    window.location.href = redirectLink;
                }, 1000);
            } else {
                messageEl.textContent = hintMessage;
                inputs.forEach(input => input.value = '');
                document.getElementById('d1').focus();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupPasswordLogic();
            
            const dialogueBox = document.getElementById('dialogue-box');
            
            dialogueBox.addEventListener('click', function startAnimation() {
                audioCtx.resume();
                dialogueBox.innerHTML = '';
                dialogueBox.style.cursor = 'default';
                typeWriter();
            }, { once: true });
        });
    </script>

</body>
</html>
